<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tekton Chains :: Red Hat Advanced Developer Suite - Level 3 Self-paced training</title>
    <link rel="canonical" href="https://redhat-ads-tech.github.io/rhads-enablement-l3/modules/tssc-tas/ex1-chains.html">
    <link rel="prev" href="exercises.html">
    <link rel="next" href="ex2-enterprise-contract.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://demo.redhat.com" target="_blank" style="margin-left: 5%;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1508.5 178.739" style="width: 278px;"><g fill="#fff"><path d="M316.6 63.2v-56H342a21.279 21.279 0 0 1 7.8 1.3 18.111 18.111 0 0 1 5.9 3.5 15.577 15.577 0 0 1 5 11.8 15.051 15.051 0 0 1-3.1 9.5 16.836 16.836 0 0 1-8.4 5.8l12.5 24.1h-9.3l-11.6-23H325v23Zm24.7-48.6H325v18.7h16.3q5.25 0 8.1-2.7a8.7 8.7 0 0 0 2.8-6.6 8.7 8.7 0 0 0-2.8-6.6c-1.8-1.9-4.5-2.8-8.1-2.8ZM364.1 42.8a20.674 20.674 0 0 1 1.6-8.2 20.288 20.288 0 0 1 4.3-6.7 19.92 19.92 0 0 1 6.5-4.5 19.718 19.718 0 0 1 8-1.6 18.463 18.463 0 0 1 7.8 1.6 18.677 18.677 0 0 1 6.2 4.5 20.927 20.927 0 0 1 4.1 6.8 23.2 23.2 0 0 1 1.5 8.4v2.3H372a13.822 13.822 0 0 0 4.6 8.4 13.6 13.6 0 0 0 9.1 3.3 15.553 15.553 0 0 0 5.7-1 12.858 12.858 0 0 0 4.6-2.6l5.1 5a25.983 25.983 0 0 1-7.4 4.1 24.69 24.69 0 0 1-8.4 1.3 21.306 21.306 0 0 1-8.4-1.6 22.763 22.763 0 0 1-6.8-4.4 20.788 20.788 0 0 1-4.5-6.7 23.2 23.2 0 0 1-1.5-8.4Zm20.2-14.2a11.527 11.527 0 0 0-8 3 13.046 13.046 0 0 0-4.2 7.8h24.2a13.091 13.091 0 0 0-4.2-7.8 11.106 11.106 0 0 0-7.8-3ZM443.1 63.2v-3.8a19.448 19.448 0 0 1-5.8 3.3 18.924 18.924 0 0 1-6.7 1.2 19.824 19.824 0 0 1-14.6-6.1 22.268 22.268 0 0 1-4.4-6.7 21.812 21.812 0 0 1 0-16.4A20.534 20.534 0 0 1 416 28a19.335 19.335 0 0 1 6.6-4.5 20.334 20.334 0 0 1 8.2-1.6 20.7 20.7 0 0 1 6.6 1 19.415 19.415 0 0 1 5.7 3V7.2l8-1.8v57.8Zm-25.2-20.4a13.718 13.718 0 0 0 4 10.1 13.45 13.45 0 0 0 9.8 4.1 14.956 14.956 0 0 0 6.4-1.3 15.954 15.954 0 0 0 4.9-3.6V33.6a14.988 14.988 0 0 0-4.9-3.5 15.271 15.271 0 0 0-6.4-1.3 13.423 13.423 0 0 0-9.9 4 13.806 13.806 0 0 0-3.9 10ZM478.1 63.2v-56h8.4v24h29.8v-24h8.4v56h-8.4V38.8h-29.8v24.4ZM547.2 64a16.483 16.483 0 0 1-10.8-3.5 11.037 11.037 0 0 1-4.2-8.9 10.375 10.375 0 0 1 4.7-9.2 20.76 20.76 0 0 1 11.8-3.2 27.841 27.841 0 0 1 5.8.6 27.374 27.374 0 0 1 5.3 1.6v-4.3a8.143 8.143 0 0 0-2.6-6.5 11.452 11.452 0 0 0-7.4-2.2 20.788 20.788 0 0 0-6 .9 34.616 34.616 0 0 0-6.6 2.6l-3-6a54.169 54.169 0 0 1 8.4-3.1 33.18 33.18 0 0 1 8.3-1.1c5.2 0 9.3 1.3 12.2 3.8s4.4 6.1 4.4 10.8v27h-7.8v-3.5a19.441 19.441 0 0 1-5.8 3.2 23.54 23.54 0 0 1-6.7 1Zm-7.3-12.6a5.646 5.646 0 0 0 2.6 4.8 11.193 11.193 0 0 0 6.6 1.8 16.256 16.256 0 0 0 5.9-1 14.449 14.449 0 0 0 4.9-2.9V47a19.778 19.778 0 0 0-4.8-1.8 24.933 24.933 0 0 0-5.7-.6 11.859 11.859 0 0 0-6.8 1.8 5.728 5.728 0 0 0-2.7 5ZM580.6 53.2v-24H572v-6.7h8.6V12.1l7.9-1.9v12.3h12v6.7h-12v22.1a5.94 5.94 0 0 0 1.4 4.4c.9.9 2.5 1.3 4.6 1.3a23.637 23.637 0 0 0 3-.2 10.857 10.857 0 0 0 2.8-.8v6.7a19.28 19.28 0 0 1-3.8.9 27.484 27.484 0 0 1-3.8.3c-3.9 0-7-.9-9-2.8-2-1.7-3.1-4.4-3.1-7.9Z"></path></g><path d="M127 90.2c12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4L149.8 37c-1.7-7.1-3.2-10.3-15.7-16.6-9.7-5-30.8-13.1-37.1-13.1-5.8 0-7.5 7.5-14.4 7.5-6.7 0-11.6-5.6-17.9-5.6-6 0-9.9 4.1-12.9 12.5 0 0-8.4 23.7-9.5 27.2a4.216 4.216 0 0 0-.3 1.9c0 9.2 36.3 39.4 85 39.4Zm32.5-11.4c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3C21.8 58.8 0 61.8 0 81c0 31.5 74.6 70.3 133.7 70.3 45.3 0 56.7-20.5 56.7-36.6-.1-12.8-11-27.3-30.9-35.9Z" fill="#e00"></path><path d="M159.5 78.8c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3l3.7-9.1a4.877 4.877 0 0 0-.3 2c0 9.2 36.3 39.4 85 39.4 12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4Z"></path><path d="M253.5 158.7a2.22 2.22 0 0 1-2.2-2.2V2.2a2.2 2.2 0 0 1 4.4 0v154.2a2.242 2.242 0 0 1-2.2 2.3Z" fill="#fff"></path><text data-name="Demo Platform" transform="translate(1186 149)" fill="#fff" font-size="82" font-family="'RedHatDisplay', 'Overpass', overpass, helvetica, arial, sans-serif" font-weight="700"><tspan x="-877.892" y="0">Demo Platform</tspan></text></svg>
      </a>
      <a class="navbar-item site-title" target="__blank" style="color: #fff !important;" href="https://redhat-ads-tech.github.io/rhads-enablement-l3">Red Hat Advanced Developer Suite - Level 3 Self-paced training</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item navbar-item-right-dropdown has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Links</a>
          <div class="navbar-dropdown navbar-dropdown-right">
            <a class="navbar-item navbar-item-right-content" href="https://redhat.com" target="_blank">Red Hat</a>
            <a class="navbar-item navbar-item-right-content" href="env.html" target="_blank">Lab</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html" class=" query-params-link">Red Hat Advanced Developer Suite (RHADS) - Technical Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started.html">Module 1: Getting started with RHADS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../setup-rhdh/foundations.html">Module 2: Setup Red Hat Developer Hub</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../setup-rhdh/foundations.html">Foundations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/foundations.html#_core_features">Core Features</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/foundations.html#_software_catalog_and_entities">Software Catalog &amp; Entities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/foundations.html#_plugins">Plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/foundations.html#_understanding_the_red_hat_developer_hub_configuration">Red Hat Developer Hub Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../setup-rhdh/setup-rhdh.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/setup-rhdh.html">Installation &amp; Base Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/configure-your-first-plugin.html">Configure your First Plugin (Authentication)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/plugin-cache.html">Plugin Caching</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/connect-gitlab-scm.html">GitLab Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/connect-argocd.html">Argo CD Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../setup-rhdh/security.html">Enable Role-Based Access Control</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../setup-tpa/setup.html">Module 3: Setup Trusted Profile Analyzer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tpa/setup.html">Foundations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tpa/setup-openshift.html">Setup Trusted Profile Analyzer on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tpa/setup-rhel.html">Setup Trusted Profile Analyzer on RHEL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../setup-tas/setup.html">Module 4: Setup Trusted Artifact Signer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tas/setup.html">Foundations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tas/setup-openshift.html">Setup Trusted Artifact Signer on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup-tas/setup-rhel.html">Setup Trusted Artifact Signer on RHEL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhdh-ui/foundations.html">Module 5: Red Hat Developer Hub User Interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhdh-ui/foundations.html">Foundations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhdh-ui/customize-rhdh.html">Hands-on Lab: Customize RHDH Appearance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhdh-ui/techdocs-foundations.html">TechDocs Foundations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhdh-ui/techdocs-lab-user.html">TechDocs Lab 1: Creating and Editing TechDocs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhdh-orchestrator/overview.html">Module 6: Orchestrator for Red Hat Developer Hub</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rhdh-orchestrator/overview.html">Foundations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhdh-orchestrator/install.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhdh-orchestrator/install.html">Install &amp; Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhdh-orchestrator/workflows.html">Managing and Running Workflows</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhdh-orchestrator/advanced-workflow.html">Workflows with State and Integrations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../security-practices/overview.html">Module 7: Getting started with security best practices</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-practices/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-practices/security-practices.html">Foundations and Frameworks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security-practices/understanding-keyless.html">Understanding Keyless Signing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../security-practices/exercises.html">Exercises</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security-practices/ex1-signing-images.html">Image Signing &amp; Verification</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security-practices/ex2-git-signing.html">Commit Signing &amp; Verification</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security-practices/ex3-provenance.html">Provenance &amp; Attestations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../security-practices/ex4-sboms.html">SBOM Creation</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tssc-tpa/tssc-tpa.html">Module 8: Trusted Software Supply Chain with TPA</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tssc-tpa/correlation.html">Data Types &amp; Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tssc-tpa/exercises.html">Exercises</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tssc-tpa/ex1-uploading-sboms.html">Exercise: Uploading Data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tssc-tpa/ex2-ui-usecases.html">Exercise: Exploring the Security Posture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tssc-tpa/ex3-licenses.html">Exercise: (Open Source) License Compliance</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="tssc-tas.html">Module 9: Attestations, Tekton Chains &amp; Enterprise Contract with TAS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="exercises.html">Exercises</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="ex1-chains.html">Tekton Chains</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ex2-enterprise-contract.html">Conforma and Rego policies</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ex3-sigstore-controller.html">Sigstore Admission Controller</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ex3.1-sigstore-prep.html">Preparation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ex3.2-sigstore-install.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ex3.3-sigstore-config.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ex3.4-sigstore-cip.html">ClusterImagePolicies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ex4-acs-controller.html">RHACS Admission Controller</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ex-controller-summary.html">Admission Controllers Summary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../production-rhdh/tssc-rhdh.html">Module 10: RHADS End-to-End: Production-Ready Development Lifecycle</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../production-rhdh/introduction.html">Foundations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../production-rhdh/introduction.html">An overview of the composite product set (RHADS)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../production-rhdh/lab.html">Hands on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../production-rhdh/lab.html">Full lifecycle of product usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tssc-3rdparty-ci.html">Module 11: Trusted Software Supply Chain with other CIs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../self-service-patterns/self-service-patterns.html">Module 12: Patterns for third-party tools integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../self-service-patterns/self-service-patterns.html">Foundations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/self-service-patterns.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/self-service-patterns.html#architecting-software-templates">Architecting Software Templates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/self-service-patterns.html#patterns">Patterns for third-party tools integrations using software templates for self-service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../self-service-patterns/lab-intro-self-service-patterns.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/lab-intro-self-service-patterns.html#introduction">Hands-on Lab Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/lab-vm-self-service-patterns.html">Hands-on Lab: VM as a Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/lab-namespace-self-service-patterns.html">Hands-on Lab: Namespace as a Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../self-service-patterns/lab-db-self-service-patterns.html">Hands-on Lab: DB as a Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ai-intro.html">Module 13: Intro to AI for AI Engineers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhads-ai/rhads-ai.html">Module 14: RHADS for AI Engineers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhads-ai/rhads-ai.html">Foundations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai.html#introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai.html#rhai">RH AI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai.html#rhads-ai">How RHADS enables tools AI for AI Engineers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai.html#other-devtools">Other Developer tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhads-ai/rhads-ai-rhads/lab-ai-rhads-overview-rhads-ai.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-rhads/lab-ai-rhads-overview-rhads-ai.html#introduction">Hands-on Lab Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-rhads/lab-ai-rhads-rhads-ai-dev-setup.html">Hands-on Lab: AI Engineering: Streamline AI Agent Development with Red Hat Advanced Developer Suite Templates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-rhads/lab-ai-rhads-rhads-ai-dev.html">Hands-on Lab: AI Engineering: Implementing AI Agent Development with Red Hat Advanced Developer Suite</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../rhads-ai/rhads-ai-devtools/lab-intro-rhads-ai.html">Hands-on Lab on other developer tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-devtools/lab-intro-rhads-ai.html#introduction">Hands-on Lab Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-devtools/lab-ai-devspaces-rhads-ai.html">Hands-on Lab: Build an Agent with RHDH from OpenShift Dev Spaces</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rhads-ai/rhads-ai-devtools/lab-ai-podman-rhads-ai.html">Hands-on Lab: Experiment with an AI application locally using Podman AI Lab</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../end-to-end.html">Module 15: RHADS Complete: Summary and Next Steps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../env.html">My lab environment details</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Red Hat Advanced Developer Suite (RHADS) - Technical Workshop</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat Advanced Developer Suite (RHADS) - Technical Workshop</a></li>
    <li><a href="tssc-tas.html">Module 9: Attestations, Tekton Chains &amp; Enterprise Contract with TAS</a></li>
    <li><a href="exercises.html">Exercises</a></li>
    <li><a href="ex1-chains.html">Tekton Chains</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Tekton Chains</h1>
<div class="sect1">
<h2 id="_the_chains_configuration"><a class="anchor" href="#_the_chains_configuration"></a>The Chains configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since Tekton Chains is a Tekton Component, on OpenShift, it is configured and managed by the {openshift_console_url}/k8s/all-namespaces/operators.coreos.com~v1alpha1~ClusterServiceVersion?cluster-service-version=pipelines[OpenShift Pipelines Operator^,window="console"].</p>
</div>
<div class="paragraph">
<p>Therefore, it is also <strong>configured</strong> via the operator:</p>
</div>
<div class="paragraph">
<p>In our <a href="https://admin-terminal-ttyd.{openshift_cluster_ingress_domain}" target="terminal">terminal</a>, take a look at the <code>tektonconfig</code> custom resource (CR), specifically the <code>spec.chain</code> section:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get tektonconfig -n openshift-operators -o yaml | less</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>HINT:</strong> Exit <code>less</code> with <kbd>q</kbd> or <kbd>Q</kbd></p>
</div>
<div class="paragraph">
<p>The operator turns the global <code>tektonconfig</code> into a <code>chains-config</code> ConfigMap in the "openshift-pipelines" namespace, that the Chains Controller reads.</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get configmap chains-config -n openshift-pipelines -o jsonpath='{.data}' | jq</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "artifacts.oci.format": "simplesigning",
  "artifacts.oci.storage": "oci",
  "artifacts.pipelinerun.format": "in-toto",
  "artifacts.pipelinerun.storage": "oci",
  "artifacts.taskrun.format": "in-toto",
  "artifacts.taskrun.storage": "oci",
  "transparency.enabled": "true",
  "transparency.url": "https://rekor-server-tssc-tas.apps.cluster-vtm4r.dynamic.redhatworkshops.io"
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Don&#8217;t change or patch this ConfigMap directly, as the operator will reconcile it based on the global <code>tektonconfig</code> CR.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you closely compare the <code>chains-config</code> configMap and the "chain" section in the <code>tektonConfig</code> you will also notice that the configMap contains all the info that Chains needs to run, but not the Chains configuration itself: <code>generateSigningSecret: true</code> is missing, for example, also the Chains "master switch": <code>disabled: false</code>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_the_current_configuration"><a class="anchor" href="#_the_current_configuration"></a>The current configuration</h3>
<div class="paragraph">
<p>So, what do these values mean (we&#8217;ll look at the <code>tektonconfig</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">    chain:
      artifacts.oci.format: simplesigning
      artifacts.oci.storage: oci
      artifacts.pipelinerun.format: in-toto
      artifacts.pipelinerun.storage: oci
      artifacts.taskrun.format: in-toto
      artifacts.taskrun.storage: oci
      disabled: false
      generateSigningSecret: true
      options: {}
      performance:
        disable-ha: false
      transparency.enabled: "true"
      transparency.url: https://rekor-server-tssc-tas.apps.cluster-vtm4r.dynamic.redhatworkshops.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s a breakdown of each Tekton Chains configuration parameter:</p>
</div>
<div class="paragraph">
<p><strong>Artifact Format &amp; Storage:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>artifacts.oci.format: simplesigning</code> - Uses "classic" signing format for OCI (container) images; creates the cryptographic signatures for artifacts (images)</p>
</li>
<li>
<p><code>artifacts.oci.storage: oci</code> - Stores OCI artifact signatures in the OCI registry itself (alongside the images)</p>
</li>
<li>
<p><code>artifacts.pipelinerun.format: in-toto</code> - Creates attestations for PipelineRuns using the in-toto format (for more information about the <code>in-toto</code> format and attestations in general, see <a href="../security-practices/ex3-provenance.html" class="xref page">Provenance &amp; Attestations</a>)</p>
</li>
<li>
<p><code>artifacts.pipelinerun.storage: oci</code> - Stores PipelineRun attestations in the OCI registry</p>
</li>
<li>
<p><code>artifacts.taskrun.format: in-toto</code> - Creates attestations for TaskRuns using the in-toto format</p>
</li>
<li>
<p><code>artifacts.taskrun.storage: oci</code> - Stores TaskRun attestations in the OCI registry</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Core Settings:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>disabled: false</code> - Chains controller is active and will sign/attest TaskRuns and PipelineRuns</p>
</li>
<li>
<p><code>generateSigningSecret: true</code> - Automatically creates signing keys for Chains (rather than providing your own) and stores it in the <code>signing-secrets</code> secret in the <code>openshift-pipelines</code> namespace</p>
</li>
<li>
<p><code>options: {}</code> - Additional configuration options (currently empty)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Performance:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>performance.disable-ha: false</code> - High Availability is enabled; multiple Chains controller replicas can run for redundancy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Transparency Log:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>transparency.enabled: "true"</code> - Enables publishing signatures/attestations to the configured Rekor transparency log for public verification</p>
</li>
<li>
<p><code>transparency.url</code> - The Rekor server endpoint where signatures are logged (part of Trusted Artifact Signer/Sigstore) to provide an immutable audit trail</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_options"><a class="anchor" href="#_configuration_options"></a>Configuration Options</h3>
<div class="paragraph">
<p>For reference and to give you some ideas of the options available (feel free to play with the configuration - it&#8217;s not a customer environment, after all) here&#8217;s a full list of configuration options and what they do</p>
</div>
<div class="paragraph">
<p><strong>Click &amp; Expand to see the full list of configuration options</strong></p>
</div>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p><strong>TaskRun Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>artifacts.taskrun.format</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>in-toto</code> - Stores TaskRun payloads in the in-toto attestation format</p>
</li>
<li>
<p><code>slsa/v1</code> - Alias of in-toto for backwards compatibility</p>
</li>
<li>
<p><code>slsa/v2alpha3</code> - Corresponds to SLSA v1.0 spec, uses latest v1 Tekton Objects (recommended for new users wanting SLSA v1.0)</p>
</li>
<li>
<p><code>slsa/v2alpha4</code> - Corresponds to SLSA v1.0 spec, uses latest v1 Tekton Objects, reads type-hinted results from StepActions (recommended)</p>
</li>
<li>
<p><strong>Default</strong>: <code>in-toto</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>artifacts.taskrun.storage</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tekton</code> - Store signatures in TaskRun annotations</p>
</li>
<li>
<p><code>oci</code> - Store signatures in OCI registries</p>
</li>
<li>
<p><code>gcs</code> - Store signatures in Google Cloud Storage</p>
</li>
<li>
<p><code>docdb</code> - Store signatures in document database (Firestore, DynamoDB, MongoDB)</p>
</li>
<li>
<p><code>grafeas</code> - Store signatures in Grafeas (Container Analysis)</p>
</li>
<li>
<p><code>archivista</code> - Store signatures in Archivista</p>
</li>
<li>
<p>Multiple backends can be specified with comma-separated list (e.g., <code>"tekton,oci"</code>)</p>
</li>
<li>
<p>Empty string <code>""</code> disables TaskRun artifact storage</p>
</li>
<li>
<p><strong>Default</strong>: <code>tekton</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>artifacts.taskrun.signer</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x509</code> - Key-based signing using x509 certificates</p>
</li>
<li>
<p><code>kms</code> - Signing using Key Management Service (AWS KMS, GCP KMS, Azure Key Vault, HashiCorp Vault)</p>
</li>
<li>
<p><code>none</code> - Disable signing while still storing provenance</p>
</li>
<li>
<p><strong>Default</strong>: <code>x509</code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>PipelineRun Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>artifacts.pipelinerun.format</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>in-toto</code> - Stores PipelineRun payloads in the in-toto attestation format</p>
</li>
<li>
<p><code>slsa/v1</code> - Alias of in-toto for backwards compatibility</p>
</li>
<li>
<p><code>slsa/v2alpha3</code> - Corresponds to SLSA v1.0 spec, uses latest v1 Tekton Objects (recommended)</p>
</li>
<li>
<p><code>slsa/v2alpha4</code> - Corresponds to SLSA v1.0 spec, uses latest v1 Tekton Objects, reads type-hinted results from StepActions (recommended)</p>
</li>
<li>
<p><strong>Default</strong>: <code>in-toto</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>artifacts.pipelinerun.storage</code></strong></p>
</div>
<div class="paragraph">
<p>Same options as TaskRun storage: <code>tekton</code>, <code>oci</code>, <code>gcs</code>, <code>docdb</code>, <code>grafeas</code>, <code>archivista</code>
- Can use comma-separated list for multiple backends
- Empty string disables PipelineRun artifact storage
- <strong>Default</strong>: <code>tekton</code></p>
</div>
<div class="paragraph">
<p><strong><code>artifacts.pipelinerun.signer</code></strong></p>
</div>
<div class="paragraph">
<p>Same options as TaskRun signer: <code>x509</code>, <code>kms</code>, <code>none</code>
- <strong>Default</strong>: <code>x509</code></p>
</div>
<div class="paragraph">
<p><strong><code>artifacts.pipelinerun.enable-deep-inspection</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"true"</code> - Chains inspects both pipeline level and task level results (captures inputs/outputs from child TaskRuns)</p>
</li>
<li>
<p><code>"false"</code> - Chains only checks pipeline level results</p>
</li>
<li>
<p><strong>Default</strong>: <code>"false"</code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>OCI Configuration (for the OCI Artifacts, aka Images)</strong></p>
</div>
<div class="paragraph">
<p><strong><code>artifacts.oci.format</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>simplesigning</code> - The only currently supported format for OCI payloads</p>
</li>
<li>
<p><strong>Default</strong>: <code>simplesigning</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>artifacts.oci.storage</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tekton</code> - Store in TaskRun/PipelineRun annotations</p>
</li>
<li>
<p><code>oci</code> - Store in OCI registries alongside images</p>
</li>
<li>
<p><code>gcs</code> - Store in Google Cloud Storage</p>
</li>
<li>
<p><code>docdb</code> - Store in document database</p>
</li>
<li>
<p><code>grafeas</code> - Store in Grafeas</p>
</li>
<li>
<p>Can use comma-separated list for multiple backends</p>
</li>
<li>
<p>Empty string disables OCI artifact storage</p>
</li>
<li>
<p><strong>Default</strong>: <code>oci</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>artifacts.oci.signer</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>x509</code> - Sign using x509 certificates</p>
</li>
<li>
<p><code>kms</code> - Sign using Key Management Service</p>
</li>
<li>
<p><code>none</code> - Skip signing OCI artifacts (but attestations are still generated and pushed if storage is configured)</p>
</li>
<li>
<p><strong>Default</strong>: <code>x509</code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>Storage Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>storage.oci.repository</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specifies the OCI repository to store signatures and attestations</p>
</li>
<li>
<p>If undefined and OCI storage is enabled, attestations are stored alongside the OCI artifact itself</p>
</li>
<li>
<p>Example: <code>gcr.io/my-project/my-repo</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.gcs.bucket</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Google Cloud Storage bucket name for storing artifacts</p>
</li>
<li>
<p>Example: <code>my-tekton-chains-bucket</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.docdb.url</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The URI reference to a docstore collection</p>
</li>
<li>
<p>Examples:</p>
<div class="ulist">
<ul>
<li>
<p>Firestore: <code>firestore://projects/[PROJECT]/databases/(default)/documents/[COLLECTION]?name_field=name</code></p>
</li>
<li>
<p>DynamoDB: <code>dynamodb://[TABLE_NAME]?partition_key=[KEY]</code></p>
</li>
<li>
<p>MongoDB: <code>mongo://[DATABASE]/[COLLECTION]?id_field=_id</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>MongoDB Connection Options</strong> (for docdb):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>storage.docdb.mongo-server-url</code> - Direct MongoDB connection URI (not recommended, stores in ConfigMap)</p>
</li>
<li>
<p><code>storage.docdb.mongo-server-url-dir</code> - Path to directory containing file named <code>MONGO_SERVER_URL</code> with connection string (recommended, uses Secret)</p>
</li>
<li>
<p><code>storage.docdb.mongo-server-url-path</code> - Direct path to file containing MongoDB connection URI (recommended, uses Secret)</p>
</li>
<li>
<p>These options override each other in order: path &gt; dir &gt; url &gt; MONGO_SERVER_URL env var</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.grafeas.projectid</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The GCP project ID where Grafeas server is located</p>
</li>
<li>
<p>Required for Grafeas storage backend</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.grafeas.noteid</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prefix for Grafeas note names (no spaces allowed)</p>
</li>
<li>
<p>Chains appends <code>-simplesigning</code> for ATTESTATION notes and <code>-intoto</code> for BUILD notes</p>
</li>
<li>
<p>If not configured, defaults to <code>tekton-&lt;NAMESPACE&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.grafeas.notehint</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Human-readable name for the Grafeas ATTESTATION note</p>
</li>
<li>
<p>Default: <code>"This attestation note was generated by Tekton Chains"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>storage.archivista.url</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL of the Archivista server for storing attestations</p>
</li>
<li>
<p>Example: <code><a href="https://archivista.testifysec.io" class="bare">https://archivista.testifysec.io</a></code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>In-toto/SLSA Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>builder.id</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The builder ID to set for in-toto attestations</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://tekton.dev/chains/v2" class="bare">https://tekton.dev/chains/v2</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>builddefinition.buildtype</code></strong></p>
</div>
<div class="paragraph">
<p>Only valid for <code>slsa/v2alpha3</code> and <code>slsa/v2alpha4</code> formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://tekton.dev/chains/v2/slsa" class="bare">https://tekton.dev/chains/v2/slsa</a></code> - Strictly conforms to SLSA v1.0 spec</p>
</li>
<li>
<p><code><a href="https://tekton.dev/chains/v2/slsa-tekton" class="bare">https://tekton.dev/chains/v2/slsa-tekton</a></code> - Conforms to SLSA v1.0 but adds Tekton-specific information (PipelineRun/TaskRun labels, annotations as internalParameters, captures each pipeline task under resolvedDependencies)</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://tekton.dev/chains/v2/slsa" class="bare">https://tekton.dev/chains/v2/slsa</a></code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>Transparency Log (Rekor) Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>transparency.enabled</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code> - Automatically upload all signatures and attestations to transparency log</p>
</li>
<li>
<p><code>false</code> - Disable transparency log uploads</p>
</li>
<li>
<p><code>manual</code> - Only upload TaskRuns/PipelineRuns with annotation <code>chains.tekton.dev/transparency-upload: "true"</code></p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>transparency.url</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The URL of the transparency log server (Rekor)</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://rekor.sigstore.dev" class="bare">https://rekor.sigstore.dev</a></code></p>
</li>
<li>
<p>Example (custom): <code><a href="https://rekor-server.mycompany.com" class="bare">https://rekor-server.mycompany.com</a></code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>Keyless Signing (Fulcio) Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.fulcio.enabled</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code> - Enable keyless signing with Fulcio (obtain short-lived certificates via OIDC)</p>
</li>
<li>
<p><code>false</code> - Use traditional key-based signing</p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.fulcio.address</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Fulcio server URL to request certificates from</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://fulcio.sigstore.dev" class="bare">https://fulcio.sigstore.dev</a></code></p>
</li>
<li>
<p>Example (custom): <code><a href="http://fulcio.fulcio-system.svc" class="bare">http://fulcio.fulcio-system.svc</a></code> (for internal Kubernetes service)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.fulcio.issuer</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The expected OIDC issuer URL</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://oauth2.sigstore.dev/auth" class="bare">https://oauth2.sigstore.dev/auth</a></code></p>
</li>
<li>
<p>Example (Keycloak): <code><a href="https://keycloak.example.com/auth/realms/myrealm" class="bare">https://keycloak.example.com/auth/realms/myrealm</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.fulcio.provider</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>google</code> - Use Google OIDC provider</p>
</li>
<li>
<p><code>spiffe</code> - Use SPIFFE for workload identity</p>
</li>
<li>
<p><code>github</code> - Use GitHub Actions OIDC tokens</p>
</li>
<li>
<p><code>filesystem</code> - Read token from file specified in <code>signers.x509.identity.token.file</code></p>
</li>
<li>
<p>If unset, each provider will be attempted automatically</p>
</li>
<li>
<p><strong>Default</strong>: Unset (tries all providers)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.identity.token.file</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Path to file containing OIDC ID token</p>
</li>
<li>
<p>Used when <code>signers.x509.fulcio.provider</code> is set to <code>filesystem</code></p>
</li>
<li>
<p>Example: <code>/var/run/secrets/tokens/oidc-token</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>signers.x509.tuf.mirror.url</code></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>TUF server URL for distributing Sigstore&#8217;s root of trust</p>
</li>
<li>
<p>The URL <code>$TUF_URL/root.json</code> must be accessible</p>
</li>
<li>
<p><strong>Default</strong>: <code><a href="https://sigstore-tuf-root.storage.googleapis.com" class="bare">https://sigstore-tuf-root.storage.googleapis.com</a></code></p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>KMS Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>signers.kms.kmsref</code></strong></p>
</div>
<div class="paragraph">
<p>The URI reference to a KMS service. Supported schemes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>gcpkms://projects/[PROJECT]/locations/[LOCATION]/keyRings/[KEYRING]/cryptoKeys/[KEY]/versions/[VERSION]</code> - Google Cloud KMS</p>
</li>
<li>
<p><code>awskms://[ENDPOINT]/[ID/ALIAS/ARN]</code> - AWS KMS</p>
</li>
<li>
<p><code>azurekms://[VAULT_NAME][VAULT_URI]/[KEY]</code> - Azure Key Vault</p>
</li>
<li>
<p><code>hashivault://[KEY]</code> - HashiCorp Vault</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>KMS Authentication:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>signers.kms.auth.address</code> - URI of KMS server (e.g., VAULT_ADDR for HashiCorp Vault)</p>
</li>
<li>
<p><code>signers.kms.auth.token</code> - Auth token for KMS server (e.g., VAULT_TOKEN)</p>
</li>
<li>
<p><code>signers.kms.auth.token-path</code> - Path to file containing KMS auth token (recommended over direct token)</p>
</li>
<li>
<p><code>signers.kms.auth.oidc.path</code> - Path used for OIDC authentication (e.g., <code>jwt</code> for Vault)</p>
</li>
<li>
<p><code>signers.kms.auth.oidc.role</code> - Role used for OIDC authentication with KMS</p>
</li>
<li>
<p><code>signers.kms.auth.spire.sock</code> - URI of SPIRE socket for KMS token (e.g., <code>unix:///tmp/spire-agent/public/api.sock</code>)</p>
</li>
<li>
<p><code>signers.kms.auth.spire.audience</code> - Audience for requesting SVID from SPIRE</p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p><strong>OpenShift-specific Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong><code>generateSigningSecret</code></strong> (TektonChain CR parameter)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code> - Operator generates a cosign key pair and stores in <code>signing-secrets</code> secret</p>
</li>
<li>
<p><code>false</code> - Operator does not generate keys (use when providing your own keys or using keyless signing)</p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
<li>
<p>Note: When set to true, creates <code>cosign.key</code> (private key), <code>cosign.password</code> (decryption password), and <code>cosign.pub</code> (public key)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>disabled</code></strong> (TektonChain CR parameter)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code> - Disable Chains feature completely</p>
</li>
<li>
<p><code>false</code> - Enable Chains</p>
</li>
<li>
<p><strong>Default</strong>: <code>false</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><code>performance.disable-ha</code></strong>
Your config shows this parameter set to <code>false</code>. This controls whether high-availability mode is disabled for the Chains controller.</p>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chains_in_action"><a class="anchor" href="#_chains_in_action"></a>Chains in action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this environment, we have a running Chains configuration that is used in all the exercises leveraging Red Hat Developer Hub as our Developer Portal and "Frontend" to the CI and CD (through the Tekton and ArgoCD plugins).</p>
</div>
<div class="paragraph">
<p>So, let&#8217;s use what we have and generate an image with associated signature and attestation, so we can see what the above configuration generated.</p>
</div>
<div class="paragraph">
<p>First, login to our {rhdh_url}[Red Hat Developer Hub instance^,window="rhdh"] as <code>{rhdh_user}</code> with password <code>{rhdh_user_password}</code></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="../_images/tssc-tas/rhdh-logout.png" alt="rhdh logout">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should you automatically be logged in as <code>admin</code>, please log out and log back in again as <code>{rhdh_user}</code> with password <code>{rhdh_user_password}</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on the "Self-Service" button (the (+) icon) to get to the {rhdh_url}/create[Self-Service Page^,window="rhdh"]</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/tssc-tas/rhdh-self-service-button.png" alt="rhdh self service button">
</div>
</div>
<div class="paragraph">
<p>Scroll down to the template named "Securing a Quarkus Service Software Supply Chain (Tekton)" and click on {rhdh_url}/create/templates/default/quarkus-stssc-template["Choose"^,window="rhdh"]</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/tssc-tas/rhdh-self-service-button-choose-template.png" alt="rhdh self service button choose template">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the name to <strong><code>tekton-chains-test</code></strong> and leave the other fields at their default values</p>
</li>
<li>
<p>Click "Next"</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All the following scripts and examples assume you gave it the name "<strong><em>tekton-chains-test</em></strong>" - if you give it any other name, you will have to adapt accordingly.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test.png" alt="rhdh tekton chains test"></a>
</div>
</div>
<div class="paragraph">
<p>Leave all other fields at their default values and click "Next" and then "Review", followed by "Create".<br>
<em>(Click on the images for full size)</em></p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-2.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-2.png" alt="rhdh tekton chains test 2"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-3.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-3.png" alt="rhdh tekton chains test 3"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-4.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-4.png" alt="rhdh tekton chains test 4"></a>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The template will instantiate all the necessary resources, from the git repo to the ArgoCD artifacts - and for our context here, <strong>The Pipeline</strong>, which will run automatically for an initial build after a few moments.</p>
</div>
<div class="paragraph">
<p>Click on {rhdh_url}/catalog/default/component/tekton-chains-test["Open Component in Catalog"^,window="rhdh"]</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-run-open-component.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-run-open-component.png" alt="rhdh tekton chains test run open component"></a>
</div>
</div>
<div class="paragraph">
<p>When you click the {rhdh_url}/catalog/default/component/tekton-chains-test/ci["CI" tab^, window="rhdh"] on the Component Page, you&#8217;ll see that a pipeline has just started (give it a moment if it hasn&#8217;t already).</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-homepage.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-homepage.png" alt="rhdh tekton chains test homepage"></a>
</div>
</div>
<div class="paragraph">
<p>After the pipelinerun has finished, you can see that the pipelinerun itself has been signed and attested (the little "shield" showing "signed" when hovering over it.)</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-homepage-ci.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-homepage-ci.png" alt="rhdh tekton chains test homepage ci"></a>
</div>
</div>
<div class="paragraph">
<p>When we go to the {rhdh_url}/catalog/default/component/tekton-chains-test/image-registry[Image Registry Tab^,window="rhdh"], we can see that the image has two tags, but also three associated elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an SBOM (created by a pipeline task, using <code>syft</code>)</p>
</li>
<li>
<p>a signature (<code>*.sig</code>)</p>
</li>
<li>
<p>an attestation (<code>*.att</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both of which haven&#8217;t been created by an explicit <code>sign and attest</code> pipeline task, but by <strong>Tekton Chains</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/tssc-tas/rhdh-tekton-chains-test-homepage-image-registry.png" alt="rhdh tekton chains test homepage image registry">
</div>
</div>
<div class="paragraph">
<p>If we open that in {quay_url}/repository/tssc/tekton-chains-test?tab=tags[Quay directly^, window="quay"] we can see that Quay also recognises the signature (which the Quay Plugin for Red Hat Developer Hub doesn&#8217;t show in its current version):</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To login to Quay, use <code>{quay_admin_user}</code> and <code>{quay_admin_password}</code>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/rhdh-tekton-chains-test-quay.png" target="image"><img src="../_images/tssc-tas/rhdh-tekton-chains-test-quay.png" alt="rhdh tekton chains test quay"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_chains_attestations"><a class="anchor" href="#_the_chains_attestations"></a>The Chains Attestations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To take a closer look at the attestations and signature, we need to download and inspect them.
As in earlier exercises, we will be using <code>cosign</code> for this.</p>
</div>
<div class="paragraph">
<p>Therefore, please open the <a href="https://admin-terminal-ttyd.{openshift_cluster_ingress_domain}" target="terminal">Podman Terminal</a> again.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you&#8217;re asked to login again - choose any user you might have saved in your browser (such as <code>{rhdh_user}</code> with <code>{rhdh_user_password}</code> or <code>{openshift_admin_user}</code> with <code>{openshift_admin_password}</code>)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To get our helper scripts, we need to clone the helpers repository again - and we&#8217;ll start with obtaining the full image reference on Quay and store it in the <code>$CHAINS_IMAGE</code> variable</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/redhat-tssc-tmm/l3-enablement-helpers.git
cd l3-enablement-helpers/tas-tssc
source ./get-chains-image-sha.sh
echo ""
echo $CHAINS_IMAGE</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_verification"><a class="anchor" href="#_verification"></a>Verification</h3>
<div class="paragraph">
<p>We will again (as in other modules) use <code>cosign verify</code> but we need the public key, since our current Chains configuration uses a public/private key pair.
Cosign then also verifies against the Rekor instance (which you can see if you type <code>help</code> since we have all that in environment variables).</p>
</div>
<div class="paragraph">
<p>Unless you use the <code>--insecure-ignore-tlog</code>, cosign will always verify the Rekor inclusion.</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign verify --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In our Chains configuration, we have <code>generateSigningSecret: true</code> that triggers the Pipelines Operator to create a secret <code>signing-secrets</code>, which contains the <code>cosign.pub</code> key, which cosign automatically recognises.<br>
Therefore, we can reference it via the <code>k8s://</code> prefix.</p>
</div>
<div class="paragraph">
<p>To reference a key, we can use</p>
</div>
<div class="ulist">
<ul>
<li>
<p>File path: <code>--key cosign.pub</code></p>
</li>
<li>
<p>Environment variable: <code>--key env://VARIABLE_NAME</code></p>
</li>
<li>
<p>Kubernetes secret: <code>--key k8s://namespace/secret-name</code></p>
</li>
<li>
<p>KMS: <code>--key gcpkms://&#8230;&#8203;</code> or <code>--key awskms://&#8230;&#8203;</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, we can tell that it is a valid signature (that also has its inclusion proof in Rekor)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cosign verify --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq

Verification for quay-vtm4r.apps.cluster-vtm4r.dynamic.redhatworkshops.io/tssc/tekton-chains-test@sha256:7c68fabb7701e5d63f6cd17914fc026501e91ff0696570da780a7d95a2a98837 --
The following checks were performed on each of these signatures:
  - The cosign claims were validated
  - Existence of the claims in the transparency log was verified offline
  - The signatures were verified against the specified public key
[
  {
    "critical": {
      "identity": {
        "docker-reference": "quay-vtm4r.apps.cluster-vtm4r.dynamic.redhatworkshops.io/tssc/tekton-chains-test"
      },
      "image": {
        "docker-manifest-digest": "sha256:7c68fabb7701e5d63f6cd17914fc026501e91ff0696570da780a7d95a2a98837"
      },
      "type": "cosign container image signature"
    },
    "optional": null
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, we can validate the attestation&#8217;s integrity and signature, if we know its type - but trying doesn&#8217;t hurt, so <code>cosign</code> will give us an error if it&#8217;s default <code>predicate type</code> (custom) doesn&#8217;t match what we have in the attestations:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign verify-attestation --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cosign verify-attestation --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq
Error: none of the attestations matched the predicate type: custom, found: https://slsa.dev/provenance/v0.2,https://slsa.dev/provenance/v0.2
error during command execution: none of the attestations matched the predicate type: custom, found: https://slsa.dev/provenance/v0.2,https://slsa.dev/provenance/v0.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, it tells us what predicate types we have and we can then check</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign verify-attestation --type https://slsa.dev/provenance/v0.2 --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq '.payload = "&lt;payload&gt;"'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We added the <code>jq</code> replacing the <code>payload</code> with a fixed string. If you try without, you will see that the <code>payload</code> contains a very long base64-encoded string - which is the actual attestation.<br>
We&#8217;ll look at that in more detail later - for now, we have <strong><em>successfully verified</em></strong> the attestations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cosign verify-attestation --type https://slsa.dev/provenance/v0.2 --key k8s://openshift-pipelines/signing-secrets $CHAINS_IMAGE | jq '.payload = "&lt;payload&gt;"'

Verification for quay-vtm4r.apps.cluster-vtm4r.dynamic.redhatworkshops.io/tssc/tekton-chains-test@sha256:7c68fabb7701e5d63f6cd17914fc026501e91ff0696570da780a7d95a2a98837 --
The following checks were performed on each of these signatures:
  - The cosign claims were validated
  - Existence of the claims in the transparency log was verified offline
  - The signatures were verified against the specified public key
{
  "payloadType": "application/vnd.in-toto+json",
  "payload": "&lt;payload&gt;",
  "signatures": [
    {
      "keyid": "SHA256:gElT0CKh7ref5P9CLalcPOSJB2ojX/28MCZFEhUrDSU",
      "sig": "MEUCIFAEpX6AElGd+AjsJRwRPKYfRj/LuCqLix0011BWm0rQAiEAp2zYjpkMFTLf54PTMX/RkD5OKpYLGnXGLSd0rtzgnG8="
    }
  ]
}
{
  "payloadType": "application/vnd.in-toto+json",
  "payload": "&lt;payload&gt;",
  "signatures": [
    {
      "keyid": "SHA256:gElT0CKh7ref5P9CLalcPOSJB2ojX/28MCZFEhUrDSU",
      "sig": "MEUCIH/Fr8cDTSrsitgfVS/OHGBv/5XhvB8wjrk1mIxZfpsrAiEA79EFeVM37iyp3iCJk2QSAPMsnCuH5m43qCtEYq5+2eU="
    }
  ]
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_download_inspect"><a class="anchor" href="#_download_inspect"></a>Download &amp; Inspect</h3>
<div class="paragraph">
<p>After successfully verifying the attestation, we can download and inspect it:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign download attestation --predicate-type https://slsa.dev/provenance/v0.2 $CHAINS_IMAGE | jq '.payload = "&lt;payload&gt;"'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As you might have noticed, the <code>download attestation</code> subcommand doesn&#8217;t take a <code>key</code>, so it doesn&#8217;t verify the signature or its integrity - however, the output is in the same format as <code>cosign verify-attestation</code> (above).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">cosign download attestation --predicate-type https://slsa.dev/provenance/v0.2 $CHAINS_IMAGE | jq '.payload = "&lt;payload&gt;"'
{
  "payloadType": "application/vnd.in-toto+json",
  "payload": "&lt;payload&gt;",
  "signatures": [
    {
      "keyid": "SHA256:gElT0CKh7ref5P9CLalcPOSJB2ojX/28MCZFEhUrDSU",
      "sig": "MEUCIFAEpX6AElGd+AjsJRwRPKYfRj/LuCqLix0011BWm0rQAiEAp2zYjpkMFTLf54PTMX/RkD5OKpYLGnXGLSd0rtzgnG8="
    }
  ]
}
{
  "payloadType": "application/vnd.in-toto+json",
  "payload": "&lt;payload&gt;",
  "signatures": [
    {
      "keyid": "SHA256:gElT0CKh7ref5P9CLalcPOSJB2ojX/28MCZFEhUrDSU",
      "sig": "MEUCIH/Fr8cDTSrsitgfVS/OHGBv/5XhvB8wjrk1mIxZfpsrAiEA79EFeVM37iyp3iCJk2QSAPMsnCuH5m43qCtEYq5+2eU="
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, we know the <code>payload</code> has the OCI-recognised MIME-type <code>application/vnd.in-toto+json</code> and its signature.</p>
</div>
<div class="paragraph">
<p>Taking a look at the actual attestation (the payload) requires decoding it - we&#8217;ll again use <code>jq</code> for that:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign download attestation --predicate-type https://slsa.dev/provenance/v0.2 $CHAINS_IMAGE |  jq -r '.payload' | base64 -d | jq . | less</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>HINT:</strong> Exit <code>less</code> with <kbd>q</kbd> or <kbd>Q</kbd></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As you can see, these two attestations are quite verbose. If you&#8217;d like to study them in more detail in your IDE / JSON Tooling of choice, you can download it, since the Terminal is just another pod on OpenShift.</p>
</div>
<div class="paragraph">
<p>In the Terminal, run:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign download attestation --predicate-type https://slsa.dev/provenance/v0.2 $CHAINS_IMAGE |  jq -r '.payload' | base64 -d | jq . &gt; /workspace/chains-attestations.json</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>On your local machine</strong>, log in to OpenShift using the <a href="https://oauth-openshift.{openshift_cluster_ingress_domain}/oauth/token/display" target="token">admin account token</a> (Click <em>"request another token"</em> if you follow the link).</p>
</div>
<div class="paragraph">
<p>Then, find the terminal&#8217;s pod name:</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n ttyd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NAME                                   READY   STATUS    RESTARTS   AGE
ttyd-admin-terminal-6bf48d8b95-zz8tk   2/2     Running   0          31h</code></pre>
</div>
</div>
<div class="paragraph">
<p>(<em>yours will be different</em>)</p>
</div>
<div class="paragraph">
<p>With the pod name from your environment, copy the file to your machine to inspect it</p>
</div>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc cp &lt;use-your-pod-name-here&gt;:/workspace/chains-attestations.json chains-attestations.json -c ttyd -n ttyd</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you look closer, you can see that we have two <code>in-toto</code> attestations of type <code>https://slsa.dev/provenance/v0.2</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>one with <code>"buildType": "tekton.dev/v1beta1/TaskRun"</code></p>
</li>
<li>
<p>one with <code>"buildType": "tekton.dev/v1beta1/PipelineRun"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both have the <code>builder.id: "https://tekton.dev/chains/v2"</code></p>
</div>
<div class="paragraph">
<p>Both also contain all the <code>environment</code> and <code>parameters</code> data under <code>invocation</code> as well as the used <code>materials</code> (task images and git source for the pipelinerun) and build timestamps under <code>metadata</code>.</p>
</div>
<div class="paragraph">
<p>So, we have a full description of the build environment and the inputs that were used to create the artifact (which is the "subject" in the <code>in-toto</code> statement "envelope")</p>
</div>
<div class="paragraph">
<p>(<em>click to enlarge</em>)</p>
</div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TaskRun:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/chains-attestations-taskrun.png" target="image"><img src="../_images/tssc-tas/chains-attestations-taskrun.png" alt="chains attestations taskrun"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>PipelineRun:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/tssc-tas/chains-attestations-pipelinerun.png" target="image"><img src="../_images/tssc-tas/chains-attestations-pipelinerun.png" alt="chains attestations pipelinerun"></a>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This is a standardized format (the slsa.dev/provenance/v0.2 format) that Enterprise Contract / Conforma policies and rules can interpret to validate the content.</p>
</div>
<div class="paragraph">
<p>More on that in the next chapter.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="exercises.html" class="query-params-link">Exercises</a></span>
  <span class="next"><a href="ex2-enterprise-contract.html" class="query-params-link">Conforma and Rego policies</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>  </div>
</main>
</div>
<footer class="footer">
  <a href="https://demo.redhat.com" target="_blank" class="poweredBy"><p>Powered by</p><div class="labInfo_poweredBy" style="display: block; width: 260px;"><svg class="labInfo_poweredByLogo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1508.5 178.739"><g fill="#111"><path d="M316.6 63.2v-56H342a21.279 21.279 0 0 1 7.8 1.3 18.111 18.111 0 0 1 5.9 3.5 15.577 15.577 0 0 1 5 11.8 15.051 15.051 0 0 1-3.1 9.5 16.836 16.836 0 0 1-8.4 5.8l12.5 24.1h-9.3l-11.6-23H325v23Zm24.7-48.6H325v18.7h16.3q5.25 0 8.1-2.7a8.7 8.7 0 0 0 2.8-6.6 8.7 8.7 0 0 0-2.8-6.6c-1.8-1.9-4.5-2.8-8.1-2.8ZM364.1 42.8a20.674 20.674 0 0 1 1.6-8.2 20.288 20.288 0 0 1 4.3-6.7 19.92 19.92 0 0 1 6.5-4.5 19.718 19.718 0 0 1 8-1.6 18.463 18.463 0 0 1 7.8 1.6 18.677 18.677 0 0 1 6.2 4.5 20.927 20.927 0 0 1 4.1 6.8 23.2 23.2 0 0 1 1.5 8.4v2.3H372a13.822 13.822 0 0 0 4.6 8.4 13.6 13.6 0 0 0 9.1 3.3 15.553 15.553 0 0 0 5.7-1 12.858 12.858 0 0 0 4.6-2.6l5.1 5a25.983 25.983 0 0 1-7.4 4.1 24.69 24.69 0 0 1-8.4 1.3 21.306 21.306 0 0 1-8.4-1.6 22.763 22.763 0 0 1-6.8-4.4 20.788 20.788 0 0 1-4.5-6.7 23.2 23.2 0 0 1-1.5-8.4Zm20.2-14.2a11.527 11.527 0 0 0-8 3 13.046 13.046 0 0 0-4.2 7.8h24.2a13.091 13.091 0 0 0-4.2-7.8 11.106 11.106 0 0 0-7.8-3ZM443.1 63.2v-3.8a19.448 19.448 0 0 1-5.8 3.3 18.924 18.924 0 0 1-6.7 1.2 19.824 19.824 0 0 1-14.6-6.1 22.268 22.268 0 0 1-4.4-6.7 21.812 21.812 0 0 1 0-16.4A20.534 20.534 0 0 1 416 28a19.335 19.335 0 0 1 6.6-4.5 20.334 20.334 0 0 1 8.2-1.6 20.7 20.7 0 0 1 6.6 1 19.415 19.415 0 0 1 5.7 3V7.2l8-1.8v57.8Zm-25.2-20.4a13.718 13.718 0 0 0 4 10.1 13.45 13.45 0 0 0 9.8 4.1 14.956 14.956 0 0 0 6.4-1.3 15.954 15.954 0 0 0 4.9-3.6V33.6a14.988 14.988 0 0 0-4.9-3.5 15.271 15.271 0 0 0-6.4-1.3 13.423 13.423 0 0 0-9.9 4 13.806 13.806 0 0 0-3.9 10ZM478.1 63.2v-56h8.4v24h29.8v-24h8.4v56h-8.4V38.8h-29.8v24.4ZM547.2 64a16.483 16.483 0 0 1-10.8-3.5 11.037 11.037 0 0 1-4.2-8.9 10.375 10.375 0 0 1 4.7-9.2 20.76 20.76 0 0 1 11.8-3.2 27.841 27.841 0 0 1 5.8.6 27.374 27.374 0 0 1 5.3 1.6v-4.3a8.143 8.143 0 0 0-2.6-6.5 11.452 11.452 0 0 0-7.4-2.2 20.788 20.788 0 0 0-6 .9 34.616 34.616 0 0 0-6.6 2.6l-3-6a54.169 54.169 0 0 1 8.4-3.1 33.18 33.18 0 0 1 8.3-1.1c5.2 0 9.3 1.3 12.2 3.8s4.4 6.1 4.4 10.8v27h-7.8v-3.5a19.441 19.441 0 0 1-5.8 3.2 23.54 23.54 0 0 1-6.7 1Zm-7.3-12.6a5.646 5.646 0 0 0 2.6 4.8 11.193 11.193 0 0 0 6.6 1.8 16.256 16.256 0 0 0 5.9-1 14.449 14.449 0 0 0 4.9-2.9V47a19.778 19.778 0 0 0-4.8-1.8 24.933 24.933 0 0 0-5.7-.6 11.859 11.859 0 0 0-6.8 1.8 5.728 5.728 0 0 0-2.7 5ZM580.6 53.2v-24H572v-6.7h8.6V12.1l7.9-1.9v12.3h12v6.7h-12v22.1a5.94 5.94 0 0 0 1.4 4.4c.9.9 2.5 1.3 4.6 1.3a23.637 23.637 0 0 0 3-.2 10.857 10.857 0 0 0 2.8-.8v6.7a19.28 19.28 0 0 1-3.8.9 27.484 27.484 0 0 1-3.8.3c-3.9 0-7-.9-9-2.8-2-1.7-3.1-4.4-3.1-7.9Z"></path></g><path d="M127 90.2c12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4L149.8 37c-1.7-7.1-3.2-10.3-15.7-16.6-9.7-5-30.8-13.1-37.1-13.1-5.8 0-7.5 7.5-14.4 7.5-6.7 0-11.6-5.6-17.9-5.6-6 0-9.9 4.1-12.9 12.5 0 0-8.4 23.7-9.5 27.2a4.216 4.216 0 0 0-.3 1.9c0 9.2 36.3 39.4 85 39.4Zm32.5-11.4c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3C21.8 58.8 0 61.8 0 81c0 31.5 74.6 70.3 133.7 70.3 45.3 0 56.7-20.5 56.7-36.6-.1-12.8-11-27.3-30.9-35.9Z" fill="#e00"></path><path d="M159.5 78.8c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3l3.7-9.1a4.877 4.877 0 0 0-.3 2c0 9.2 36.3 39.4 85 39.4 12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4Z"></path><path d="M253.5 158.7a2.22 2.22 0 0 1-2.2-2.2V2.2a2.2 2.2 0 0 1 4.4 0v154.2a2.242 2.242 0 0 1-2.2 2.3Z" fill="#111"></path><text data-name="Demo Platform" transform="translate(1186 149)" fill="#111" font-size="82" font-family="'RedHatDisplay', 'Overpass', overpass, helvetica, arial, sans-serif" font-weight="700"><tspan x="-877.892" y="0">Demo Platform</tspan></text></svg></div></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
